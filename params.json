{"name":"Jquery-shoutcast","body":"#jQuery SHOUTcast plugin\r\n\r\nThis simple plugin allows you to display various information about a SHOUTcast server on your website.\r\n\r\n## Requirements\r\n\r\n1. jQuery\r\n2. SHOUTcast V2 DNAS with JSON functionality\r\n\r\n## Usage\r\n\r\n### Embedding\r\n\r\nFirst you will need to reference jQUery (if you haven't already done so) and this plugin, place the following lines of code at the bottom of your HTML page, just before the `</body>` tag\r\n\r\n```html\r\n<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>\r\n<script src=\"your_website.com/assets/js/jquery.shoutcast.min.js\"></script>\r\n```\r\nAny of the following code that you see in this documentation must be either placed inside `<script></script>` tags or in an separate .js file.\r\n\r\n\r\n### Stream Stats\r\n\r\nThe plug can get the public stream stats taken from host:port/stats, here is the basic code:\r\n\r\n#### Basic Setup\r\n\r\n```javascript\r\n$.SHOUTcast({\r\n   host : 'stardust.wavestreamer.com',\r\n   port : 8062\r\n}).stats(function(){\r\n   $('#songtitle').text(this.get('songtitle'));\r\n});\r\n```\r\nThe above code will set the text of an element with the id of 'songtitle' to whatever the name of the current track is.\r\n\r\n#### Auto update on an interval\r\n\r\nYou can set the plugin to automatically fetch new stats at an interval you specify, heres the basic code:\r\n\r\n```javascript\r\n$.SHOUTcast({\r\n   host : 'stardust.wavestreamer.com',\r\n   port : 8062,\r\n   interval : 5000,\r\n   stats : function(){\r\n      $('#songtitle').text(this.get('songtitle'));\r\n   }\r\n}).startStats();\r\n\r\n```\r\nThe above code will set the element with an id of 'songtitle' to the title of the currently playing track every 5 seconds.\r\n\r\n#### Ensuring stream is active\r\n\r\nBoth of the above examples assume that the stream is live and set the song title, this is now always the case, to check of this you can do:\r\n\r\n```javascript\r\nif(this.onAir()){\r\n   $('#songtitle').text(this.get('songtitle'));\r\n}\r\n```\r\n\r\nThe above code will only set the title if it is on air, or you could have a default song value:\r\n\r\n```javascript\r\n$('#songtitle').text(this.get('songtitle','Off Air'));\r\n```\r\n\r\nThe above code will show 'Off Air' if there is no song title.\r\n\r\n### Track history\r\n\r\nThe plugin can also get the track history from the shoutcast server, this is taken from host:port/played, here is the basic code:\r\n\r\n```javascript\r\n$.SHOUTcast({\r\n   host : 'stardust.wavestreamer.com',\r\n   port : 8062\r\n}).played(function(tracks){\r\n   $('ul').html('');\r\n   $.each(tracks,function(k,track){\r\n      $('ul').append('<li>'+track.title+'</li>');\r\n   ));\r\n});\r\n```\r\nThe above code is very basic but it will insert the track history into a ul element.\r\n\r\n#### Updating played tracks at an interval\r\n\r\n```javascript\r\n$.SHOUTcast({\r\n   host : 'stardust.wavestreamer.com',\r\n   port : 8062,\r\n   playedInterval : 20000,\r\n   played : function(tracks){\r\n      $('ul').html('');\r\n      $.each(tracks,function(k,track){\r\n         $('ul').append('<li>'+track.title+'</li>');\r\n      ));\r\n   }\r\n}).startPlayed();\r\n```\r\nThe above code will update the ul every 20 seconds with the played information\r\n\r\n### Configuration\r\n\r\n#### Initial options\r\n\r\nAs you have seen from the previous example you initial pass some options to the plugin, all supported options are:\r\n\r\n* `host`       - the SHOUTcast host e.g. stardust.wavestreamer.com\r\n* `port`    - [optional] the SHOUTcast port e.g. 8062 (8000 by default)\r\n* `stream`  - [optional] the stream id e.g. 2 (1 by default)\r\n* `interval`  - [optional] how often new stats should be fetched in milliseconds e.g. 5000 = 5 seconds\r\n* `stats`   - [optional] the function to call when new stats are fetched, 'this' is the SHOUTcast object\r\n* `played` - [optional] the functon to call when played info is fetched, 'this' is the SHOUTcast object\r\n* `statsInverval` - [optional] how often should stats be fetched in milliseconds\r\n* `playedInterval` - [optional] how often should played be fetched in milliseconds\r\n\r\nThe plugin will return a `SHOUTcast` object.\r\n\r\nBoth `statsInterval` and `playedInterval` will default to interval if not provided.\r\n\r\n### SHOUTcast object\r\n   \r\nEach call to $.SHOUTcast will return an internal SHOUTcast object, this object has various functions which can be useful.\r\n\r\n* `get([key,default])` - this method will get a value from the stats, e.g. 'songtitle', if no key then all the attributes will be returned. A sond default value can be passed to be returned if the key does not exist\r\n* `stats([callback])` - this method will get stats from the SHOUTcast server, it will call the callback function with the stats, the callback function 'this' value will be the SHOUTcast object.\r\n* `played([callback])` - this method will get the played tracks from the SHOUTcast server, it will call the callback with an array\r\n* `startStats()` - start automatically fetching the stats at an interval, the interval/statsInterval properties and stats function should have been passed as initial options to the plugin\r\n* `stopStats()` - stop automatically updating stats\r\n* `startPlayed()` - start automatically fetching played information\r\n* `stopPlayed()` - stop automatically fetching played information\r\n* `getStatus()` - get the status of the stream, the return values are: 0 = offline, 1 = no source connected, 2 = on air\r\n* `onAir()` - check if the stream is on air will return true or false\r\n\r\n\r\n## SHOUTcast info\r\n\r\n### Stats\r\n\r\nThese are the various options which can be accessed when using the stats method.\r\n\r\n* currentlisteners\r\n* peaklisteners\r\n* maxlisteners\r\n* uniquelisteners\r\n* averagetime\r\n* servergenre\r\n* serverurl\r\n* servertitle\r\n* songtitle\r\n* nexttitle\r\n* streamhits\r\n* streamstatus\r\n* bitrate\r\n* content\r\n* version\r\n\r\nYou can pass any of the above keys to the get method to attempt to get that information.\r\n\r\nYou can view these stats on your own server by visiting `host:port/stats?sid=1`\r\n\r\nHere is the official [SHOUTcast documentation](http://wiki.winamp.com/wiki/SHOUTcast_DNAS_Server_2_XML_Reponses#General_Server_Summary)\r\n\r\n### Played\r\n\r\nThe played method will give you an array of objects, or tracks. Each track has two properties, 'playedat' and 'title'\r\n\r\n* playedat - when this track was played, please note this is in seconds\r\n* title - the track that was played\r\n\r\nYou can view the played information by visiting `host:port/played?sid=1`","tagline":"jQuery plugin to communicate with SHOUTcast DNAS v2 via JSON-P","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}