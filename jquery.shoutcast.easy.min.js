/* Wavestreaming.com - https://github.com/Wavestreaming/jquery-shoutcast - MIT licensed */
(function(){function a(a){this._attr={},this.playedInterval=a.playedInterval||a.interval||3e4,this.statsInterval=a.statsInterval||a.interval||5e3,this.host=a.host,this.port=parseInt(a.port,10)||8e3,this.stream=parseInt(a.stream,10)||1,this._statsinterval=null,this._playedinterval=null,this._stats=a.stats||function(){},this._played=a.played||function(){}}"use strict",a.prototype.get=function(a,b){return a?typeof this._attr[a.toLowerCase()]!="undefined"?this._attr[a.toLowerCase()]:b:this._attr},a.prototype.stats=function(a){var b=this,c,d="http://"+this.host+":"+this.port+"/stats?sid="+this.stream+"&json=1";return a=a||function(){},c=$.ajax({url:d,dataType:"jsonp",timeout:"2000"}),c.success(function(c){if(typeof c!="object"||typeof c.streamstatus=="undefined"){b._status=0;return}b._status=c.streamstatus===1?2:1,b._attr=c,b._attr.status=b.getStatusAsText(),a.call(b,b._attr),b._stats(b._attr)}),c.error(function(){b._status=0,b._attr.status=b.getStatusAsText(),a.call(b,b._attr),b.stats(b._attr)}),this},a.prototype.played=function(a){var b=this,c="http://"+this.host+":"+this.port+"/played?sid="+this.stream+"&type=json";return $.ajax({url:c,dataType:"jsonp",timeout:2e3,success:function(c){if(!c instanceof Array)return;a&&a.call(b,c),b._played(c)}}),this},a.prototype.startStats=function(){return this.stopStats(),this.stats(),this._statsinterval=setInterval($.proxy(this.stats,this),this.statsInterval),this},a.prototype.stopStats=function(){return this._statsinterval&&clearInterval(this._statsinterval),this},a.prototype.startPlayed=function(){return this.stopPlayed(),this.played(),this._playedinterval=setInterval($.proxy(this.played,this),this.playedInterval),this},a.prototype.stopPlayed=function(){return this._playedinterval&&clearInterval(this._playedinterval),this},a.prototype.getStatus=function(){return this._status},a.prototype.getStatusAsText=function(){return["Offline","Awaiting Connection","On Air"][this._status]},a.prototype.onAir=function(){return this._status===2},$.SHOUTcast=function(b){return new a(b)}})(),function(a){"use strict";var b={},c={},d=!1,e=!1,f,g=$("script").last();(function(){var a=g.attr("src"),c=a.replace(/.*\?/,"");if(c===a)return;$.each(c.split("&"),function(a,c){c=c.split("="),c.length===2&&(b[c[0]]=c[1])})})();if(!b.host)return;b.value&&function(){b.value==="played"?g.after('<ul id="played"></ul>'):g.after('<p data-shoutcast-value="'+b.value+'"></p>')}(),b.playedInterval=b.playedInterval||3e4,b.statsInterval=b.statsInterval||5e3,$("[data-shoutcast-value]").each(function(a,b){b=$(b),c[b.data("shoutcast-value")]=b}),d=!$.isEmptyObject(c),f=$("#played"),e=!!f.length,d&&(b.stats=function(){var a;for(a in c)c.hasOwnProperty(a)&&c[a].text(this.get(a))}),e&&(b.played=function(a){var b="";$.each(a,function(a,c){b+="<li>"+c.title+"</li>"}),f.html(b)}),a.SHOUTcast=$.SHOUTcast(b),d&&a.SHOUTcast.startStats(),e&&a.SHOUTcast.startPlayed()}(window);